-- ğŸ’¬ THÃ”NG BÃO KHá»I Äá»˜NG
local notifications = {
    "Äang Táº£i...",
    "Äang XÃ¡c Minh Danh TÃ­nh",
    "Äang Thiáº¿t Láº­p...",
    "Cháº¡y ThÃ nh CÃ´ng !",
    "follow my main account: [ğŸ‘‘]duydeohack"
}

for _, msg in ipairs(notifications) do
    pcall(function()
        game.StarterGui:SetCore("SendNotification", {
            Title = "LÃª ThÃ¡i An",
            Text = msg,
        })
    end)
    wait(2)
end

-- ğŸ“¦ Dá»ŠCH Vá»¤ & BIáº¾N
local Players = game:GetService("Players")
local player = Players.LocalPlayer
local camera = workspace.CurrentCamera
local runService = game:GetService("RunService")
local userInputService = game:GetService("UserInputService")
local stats = game:GetService("Stats")

local aimSpeed = 0.3
local smoothingFactor = 0.02
local isAimAssistEnabled = false
local currentTarget = nil

-- ğŸ“¡ Láº¤Y PING
local function getPing()
    local network = stats:FindFirstChild("Network")
    if network and network:FindFirstChild("Ping") then
        return network.Ping:GetValue()
    end
    return 80 -- fallback náº¿u khÃ´ng cÃ³ giÃ¡ trá»‹ ping
end

-- ğŸ§  Dá»° ÄOÃN Vá»Š TRÃ
local function predictTargetPosition(target)
    local head = target:FindFirstChild("Head")
    local hrp = target:FindFirstChild("HumanoidRootPart")
    if head and hrp then
        local ping = getPing()
        local predictionTime = 0.125 + (ping * 0.002)
        return head.Position + hrp.Velocity * predictionTime
    end
    return head and head.Position or Vector3.new()
end

-- ğŸ”« NGáº®M Tá»° Äá»˜NG
local function aimAtTarget()
    if currentTarget and currentTarget.Parent then
        local predicted = predictTargetPosition(currentTarget)
        local direction = (predicted - camera.CFrame.Position).Unit
        local smoothDir = (1 - smoothingFactor) * direction + smoothingFactor * camera.CFrame.LookVector
        camera.CFrame = CFrame.new(camera.CFrame.Position, camera.CFrame.Position + aimSpeed * smoothDir)
    else
        currentTarget = nil
        isAimAssistEnabled = false
    end
end

-- ğŸ•¹ï¸ TÃŒM NGÆ¯á»œI Gáº¦N CHUá»˜T NHáº¤T
local function findClosestPlayerToMouse()
    local mousePos = userInputService:GetMouseLocation()
    local closest, shortest = nil, math.huge

    for _, plr in ipairs(Players:GetPlayers()) do
        if plr ~= player and plr.Character and plr.Character:FindFirstChild("Head") then
            local screenPos, onScreen = camera:WorldToScreenPoint(plr.Character.Head.Position)
            if onScreen then
                local dist = (Vector2.new(screenPos.X, screenPos.Y) - mousePos).Magnitude
                if dist < shortest then
                    closest = plr.Character
                    shortest = dist
                end
            end
        end
    end

    return closest
end

-- âŒ¨ï¸ PHÃM Táº®T: C
userInputService.InputBegan:Connect(function(input, gpe)
    if not gpe and input.KeyCode == Enum.KeyCode.C then
        isAimAssistEnabled = not isAimAssistEnabled
        if isAimAssistEnabled then
            currentTarget = findClosestPlayerToMouse()
        else
            currentTarget = nil
        end
        print("Aim Assist:", isAimAssistEnabled)
    end
end)

-- ğŸ’€ RESET Má»¤C TIÃŠU KHI CHáº¾T
player.CharacterAdded:Connect(function(character)
    character:WaitForChild("Humanoid").Died:Connect(function()
        if currentTarget == character then
            currentTarget = nil
        end
    end)
end)

-- ğŸ” VÃ’NG Láº¶P CHÃNH
runService.RenderStepped:Connect(function()
    if isAimAssistEnabled then
        aimAtTarget()
    end
end)
